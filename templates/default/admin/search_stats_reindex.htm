<style type="text/css">@import url( ${contextPath}/templates/${templateName}/styles/style.css );</style>

<script type="text/javascript">
function writeOptions(fieldName, from, to) 
{
	document.write("<select name='" + fieldName + "'>");
	document.write("<option value=''>--</option>");

	for (var i = from; i <= to; i++) {
		document.write("<option value='" + i + "'>" + i + "</option>");
	}

	document.write("</select>&nbsp;&nbsp;");
}

function writeTimeGroup(fieldNamePrefix)
{
	document.write("<input type='text' style='width: 35px;' maxlength='2' name='" + fieldNamePrefix + "Hour'> : ");
	document.write("<input type='text' style='width: 35px;' maxlength='2' name='" + fieldNamePrefix + "Minute'>");
}
</script>

<table class="forumline gen" cellspacing="1" cellpadding="3" width="100%">
	<tr>
		<th class="thhead" colspan="5">${I18n.getMessage("SearchStats.ReIndex")}</th>
	</tr>

	<tr>
		<td>
			<strong>${I18n.getMessage("SearchStats.TotalMessagesInDatabase")}:</strong> <i>${totalMessages}</i>
		</td>
	</tr>

	<tr>
		<td>
			<strong>${I18n.getMessage("SearchStats.IndexLocation")}:</strong> <i>${indexLocation}</i>
		</td>
	</tr>

	<tr>
		<td>
			<strong>${I18n.getMessage("SearchStats.IndexExists")}:</strong>
			<#if !indexExists>
				<i>${I18n.getMessage("No")}</i>. <a href="${contextPath}/jforum${extension}?module=${moduleName}&action=createIndexDirectory">>${I18n.getMessage("SearchStats.CreateIndexNow")}</a>
			<#else>
				<i>${I18n.getMessage("Yes")}</i>. 

			<table border="0" class="forumline gen">
				<tr>
					<th colspan="2">${I18n.getMessage("SearchStats.ReDo")}</th>
				</tr>

				<tr>
					<td>
						<input type="radio" id="reindexByDate" name="reindexType" value="1" checked="checked"><label for="reindexByDate">${I18n.getMessage("SearchStats.ByDate")}</label>
					</td>
					<td valign="top">
						<table border="0" class="forumline gen">
							<tr>
								<td>From: </td>
								<td>
									<span class="gensmall">(dd/mm/yyyy hh:mm)</span>

									<script type="text/javascript">
										writeOptions("fromDay", 1, 31);
										writeOptions("fromMonth", 1, 12);
										writeOptions("fromYear", 1995, new Date().getFullYear());
										writeTimeGroup("from");
									</script>
								</td>
							</tr>

							<tr>
								<td>To:</td>
								<td>
									<span class="gensmall">(dd/mm/yyyy hh:mm)</span>

									<script type="text/javascript">
										writeOptions("toDay", 1, 31);
										writeOptions("toMonth", 1, 12);
										writeOptions("toYear", 1995, new Date().getFullYear());
										writeTimeGroup("to");
									</script>
								</td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td>
						<input type="radio" id="reindexByMessage" name="reindexType" value="2"><label for="reindexByMessage">By Post ID</label>
					</td>
					<td valign="top">
						<table border="0" class="forumline gen">
							<tr>
								<td>From:</td>
								<td><input type="text" name="firstPostId">
							</tr>

							<tr>
								<td>To:</td>
								<td><input type="text" name="lastPostId">
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td width="200">
						<input type="checkbox" id="avoidDuplicated" name="avoidDuplicatedRecords" value="yes" checked="checked"><label for="avoidDuplicates">Check if message exists before adding to index</label>
					</td>
					<td class="gensmall">
						This avoid duplicated records, but the indexing process will take longer to complete
					</td>
				</tr>

				<tr>
					<td colspan="2" align="right" class="cat">
						<input type="submit" value="Start" style="width: 100px; font-weight: bold;">
					</td>
				</tr>
			</table>
			</#if>
		</td>
	</tr>
</table>